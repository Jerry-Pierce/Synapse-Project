<!-- templates/shop.html -->
{% extends "layout.html" %}
{% block title %}{{ t.item_shop }}{% endblock %}
{% block content %}
    <div class="container shop-layout">
        <!-- 왼쪽 카테고리 메뉴 -->
        <div class="shop-sidebar">
            <div class="shop-header glass-card">
                <div class="player-balance">
                    <i class="ri-star-line"></i>
                    <span>{{ player_score }}</span>
                </div>
            </div>
            <div class="shop-categories glass-card">
                <div class="section-header">
                    <i class="ri-price-tag-3-line"></i>
                    <h2>{{ t.categories }}</h2>
                </div>
                <div class="category-list">
                    <a href="#" class="category-item active">
                        <i class="ri-medal-2-line"></i>
                        <span>{{ t.badges }}</span>
                    </a>
                    <a href="#" class="category-item">
                        <i class="ri-emotion-line"></i>
                        <span>{{ t.emotes }}</span>
                    </a>
                    <a href="#" class="category-item">
                        <i class="ri-palette-line"></i>
                        <span>{{ t.themes }}</span>
                    </a>
                </div>
            </div>
        </div>

        <!-- 오른쪽 아이템 그리드 -->
        <div class="shop-content">
            <div class="shop-content-header glass-card">
                <h1>{{ t.item_shop }}</h1>
                <p class="subtitle">{{ t.shop_description }}</p>
            </div>

            <div class="shop-items">
                {% for item_id, item_info in items.items() %}
                <div class="shop-item glass-card">
                    <div class="item-preview">
                        <div class="item-icon">
                            <i class="ri-{{ item_info.icon_class }}-line"></i>
                        </div>
                    </div>
                    <div class="item-info">
                        <h3>{{ item_info.name }}</h3>
                        <p>{{ item_info.description }}</p>
                        <div class="item-price">
                            <i class="ri-star-line"></i>
                            <span>{{ item_info.price }}</span>
                        </div>
                    </div>
                    <form action="{{ url_for('buy_item', item_id=item_id) }}" method="POST">
                        {% if item_id in player_items %}
                            <button type="submit" class="glass-button owned" disabled>
                                <i class="ri-check-line"></i>
                                {{ t.owned }}
                            </button>
                        {% else %}
                            <button type="submit" class="glass-button" {{ 'disabled' if player_score < item_info.price }}>
                                <i class="ri-shopping-cart-line"></i>
                                {{ t.buy }}
                            </button>
                        {% endif %}
                    </form>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
{% endblock %}