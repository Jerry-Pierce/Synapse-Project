<!-- templates/profile.html -->
{% extends "layout.html" %}
{% block title %}{{ t.my_profile }}{% endblock %}
{% block content %}
    <div class="container dashboard-layout">
        <!-- 프로필 헤더 -->
        <div class="profile-header glass-card">
            <div class="profile-info">
                <div class="profile-avatar">
                    <i class="ri-user-smile-line"></i>
                </div>
                <div class="profile-details">
                    <h1>{{ session.username }}</h1>
                    <p class="subtitle">{{ t.member_since }} {{ player.join_date }}</p>
                </div>
            </div>
            <div class="profile-actions">
                <button class="glass-button">
                    <i class="ri-edit-line"></i>
                    {{ t.edit_profile }}
                </button>
            </div>
        </div>

        <!-- 통계 섹션 -->
        <div class="stats-row">
            <div class="stat-card glass-card">
                <div class="stat-icon">
                    <i class="ri-star-line"></i>
                </div>
                <div class="stat-info">
                    <h3>{{ player.score }}</h3>
                    <p>{{ t.total_score }}</p>
                </div>
            </div>
            <div class="stat-card glass-card">
                <div class="stat-icon">
                    <i class="ri-ticket-2-line"></i>
                </div>
                <div class="stat-info">
                    <h3>{{ player.tickets }}</h3>
                    <p>{{ t.tickets }}</p>
                </div>
            </div>
            <div class="stat-card glass-card">
                <div class="stat-icon">
                    <i class="ri-flag-line"></i>
                </div>
                <div class="stat-info">
                    <h3>{{ stats.completed_goals }}</h3>
                    <p>{{ t.goals_completed }}</p>
                </div>
            </div>
            <div class="stat-card glass-card">
                <div class="stat-icon">
                    <i class="ri-trophy-line"></i>
                </div>
                <div class="stat-info">
                    <h3>{{ stats.completion_rate }}%</h3>
                    <p>{{ t.completion_rate }}</p>
                </div>
            </div>
        </div>

        <!-- 업적 섹션 -->
        <div class="achievements-section glass-card">
            <div class="section-header">
                <i class="ri-medal-line"></i>
                <h2>{{ t.achievements }}</h2>
            </div>
            <div class="achievements-grid">
                {% for badge_id, badge_info in badges.items() %}
                    <div class="achievement-card {{ 'completed' if badge_id in player.badges else '' }}">
                        <div class="achievement-icon">
                            <i class="ri-{{ badge_info.icon_class }}-line"></i>
                        </div>
                        <div class="achievement-info">
                            <h3>{{ badge_info.name }}</h3>
                            <p>{{ badge_info.description }}</p>
                        </div>
                        {% if badge_id in player.badges %}
                            <div class="achievement-status">
                                <i class="ri-checkbox-circle-line"></i>
                                {{ t.unlocked }}
                            </div>
                        {% endif %}
                    </div>
                {% endfor %}
            </div>
        </div>

        <!-- 활동 히스토리 -->
        <div class="activity-section glass-card">
            <div class="section-header">
                <i class="ri-history-line"></i>
                <h2>{{ t.recent_activity }}</h2>
            </div>
            <div class="activity-timeline">
                {% for activity in activities %}
                    <div class="activity-item">
                        <div class="activity-icon">
                            <i class="ri-{{ activity.icon }}-line"></i>
                        </div>
                        <div class="activity-content">
                            <p>{{ activity.description }}</p>
                            <span class="activity-time">{{ activity.time }}</span>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>

        <div class="action-buttons">
            <a href="{{ url_for('index') }}" class="glass-button">
                <i class="ri-arrow-left-line"></i>
                {{ t.back_to_goal_list }}
            </a>
        </div>
    </div>
{% endblock %}